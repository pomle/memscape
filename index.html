<html>
	<head>
		<link href="assets/main.css" type="text/css" rel="stylesheet">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"/></script>
		<script src="http://threejs.org/build/three.min.js"></script>
		<script type="text/javascript" src="http://mrdoob.github.io/three.js/examples/fonts/helvetiker_bold.typeface.js"></script>
		<script type="text/javascript" src="js/main.js"></script>

		<script type="text/javascript" src="js/controller/AudioFader.js"></script>
		<script type="text/javascript" src="js/controller/AudioResolver.js"></script>
		<script type="text/javascript" src="js/controller/InstagramUserImagePool.js"></script>
		<script type="text/javascript" src="js/controller/Photographer.js"></script>
		<script type="text/javascript" src="js/controller/TrackQueue.js"></script>
		<script type="text/javascript" src="js/entity/ImageEntity.js"></script>
		<script type="text/javascript" src="js/model/ImageModel.js"></script>
		<script type="text/javascript" src="js/model/TimelineModel.js"></script>
		<script type="text/javascript" src="js/world/ImageStream.js"></script>
		<script type="text/javascript" src="js/world/SongStream.js"></script>
	</head>
	<body>
		<script type="text/javascript">
			var momentus;
			var momentusReady = true;
			$(function() {
				var viewModes = [1,2,3];
				var viewModeIndex = 0;
				$('.controlPanel')
					.on('click', '.camera', function(e) {
						e.preventDefault();
						viewModeIndex = ++viewModeIndex % viewModes.length;
						console.log(viewModeIndex);
						momentus.setViewMode(viewModes[viewModeIndex]);
					})
					.on('click', '.shutdown', function(e) {
						e.preventDefault();
						if (momentus.shutDown) {
							momentus.shutDown(function() {
								$('.viewport').remove();
								$('form').fadeIn();
								momentus = null;
								momentusReady = true;
							});
						}
					});

				$('form').submit(function(e) {
					e.preventDefault();
					if (!momentusReady) {
						return;
					}
					momentusReady = false;
					var lastFmUser = $(this).find('[name=lastFmUser]').val();
					var instagramUser = $(this).find('[name=instagramUser]').val();
					$(this).fadeOut(500, function() {
						$('.hud').fadeIn();
						momentus = new AutonomousMoments(lastFmUser, instagramUser);
					});
				});
			});
		</script>
		<div class="hud">
			<div class="controlPanel">
				<a href="#" class="button camera"></a>
				<a href="#" class="button shutdown"></a>
			</div>
			<div class="informationPanel">
				<div class="head">
					<h1 class="date"></h1>
				</div>
				<div class="foot">
					<h3 class="details"></h3>
				</div>
			</div>
		</div>
		<div class="content">
			<form class="login">
				<h1>momentus</h1>
				<h4>Navigate with arrow keys.</h4>
				<table>
					<tr>
						<th>Last.fm</th>
						<td><input name="lastFmUser" value="pomle"></td>
					</tr>
					<tr>
						<th>Instagram</th>
						<td><input name="instagramUser" value="pomle"></td>
					</tr>
				</table>
				<button>Start</button>
			</form>
		</div>
	</body>
</html>